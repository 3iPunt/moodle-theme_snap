define(["core/notification","core/ajax"],function(a,b){var c=!1;return{ifErrorShowBestMsg:function(d,e,f){if(c)return!0;if("object"!=typeof d)try{var g=JSON.parse(d);d=g}catch(h){}if("undefined"==typeof d&&(d={error:M.util.get_string("unknownerror","core")}),d.error||d.errorcode){var i=function(b){f?a.alert(null,f,M.util.get_string("ok","moodle")):a.exception(b)};e=e?e:"";var j={failedactionmsg:e};return b.call([{methodname:"theme_snap_loginstatus",args:j,done:function(b){c||(b.loggedin?i(d):($("<style>.confirmation-dialogue .confirmation-buttons input:nth-of-type(2), .moodle-dialogue-base.moodle-dialogue-confirm button.yui3-button.closebutton{ display : none }</style>").appendTo("head"),a.confirm(b.loggedouttitle,b.loggedoutmsg,b.loggedoutcontinue," ",function(){window.location=M.cfg.wwwroot+"/login/index.php"}),c=!0))},fail:function(){i(d)}}],!1,!1),!0}return!1}}});