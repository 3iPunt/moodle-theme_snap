define(["jquery","core/ajax","core/notification"],function(a,b,c){var d=function(d){var e=M.theme_snap.courseconfig.unavailablesections.map(Number),f=M.theme_snap.courseconfig.unavailablemods.map(Number);a(document).on("modulecompleted",function(){b.call([{methodname:"theme_snap_course_completion",args:{courseshortname:d,unavailablesections:e.join(","),unavailablemods:f.join(",")},done:function(b){if(Object.keys(b.newlyavailablesectionhtml).length)for(var c in b.newlyavailablesectionhtml)a("#section-"+c+" .content > .snap-restrictions-meta").remove();var d=function(b,c){if(Object.keys(b).length)for(var d in b){var e=b[d],f="#"+c+"-"+d;"module"===c?a(f).replaceWith(e):(a(f+" ul.section").length?a(f+" ul.section").replaceWith(e):a(f+" nav.section_footer").before(e),a(f+" > .snap-restrictions-meta .text-danger").replaceWith(""))}};d(b.newlyavailablesectionhtml,"section"),d(b.newlyavailablemodhtml,"module"),e=b.unavailablesections.split(",").map(Number),f=b.unavailablemods.split(",").map(Number)},fail:function(a){c.exception(a)}}],!0,!0)})};return d});